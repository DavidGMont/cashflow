import{_ as b,r as h,o as p,c as y,a as e,b as S,w as $,v as T,F as R,p as C,d as M,e as U,f as O,t as D,g as f,h as A,u as L,n as G,i as H,j as F,k as w,l as I,m as X,q as N,s as V,T as z,x as J,y as j}from"./index-877a027e.js";const q=t=>(C("data-v-364951ce"),t=t(),M(),t),E={class:"header"},W={class:"resume"},K={class:"movements"},Q=q(()=>e("div",{class:"grip"},null,-1)),Y=[Q],Z={class:"body"},ee={__name:"LayoutComponent",setup(t){const i=h(!1);return(l,n)=>(p(),y(R,null,[e("div",E,[S(l.$slots,"header",{},void 0,!0)]),e("div",W,[S(l.$slots,"resume",{},void 0,!0)]),e("div",K,[e("div",{class:"head",onClick:n[0]||(n[0]=r=>i.value=!i.value)},Y),$(e("div",Z,[S(l.$slots,"movements",{},void 0,!0)],512),[[T,i.value]])])],64))}},te=b(ee,[["__scopeId","data-v-364951ce"]]);const P=t=>(C("data-v-bcdde822"),t=t(),M(),t),oe=P(()=>e("span",null,"Flow",-1)),ne=P(()=>e("span",null,null,-1)),se={__name:"HeaderComponent",setup(t){const i=()=>location.reload();return(l,n)=>(p(),y("header",null,[e("img",{onClick:i,src:U,alt:"Logo"}),e("h1",{onClick:i},[O("Cash"),oe]),ne]))}},ae=b(se,[["__scopeId","data-v-bcdde822"]]),le=""+new URL("trash-icon-4f01394e.svg",import.meta.url).href;const ce={class:"movement"},ue={class:"content"},ie={class:"action"},re={__name:"MovementItem",props:{id:{type:Number},title:{type:String},description:{type:String},amount:{type:Number}},emits:["remove"],setup(t,{emit:i}){const l=t,n=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}),{id:r,title:c,description:d,amount:_}=D(l),m=f(()=>n.format(_.value)),a=f(()=>_.value<0),u=()=>i("remove",r.value);return(s,o)=>(p(),y("div",ce,[e("div",ue,[e("h4",null,A(L(c)),1),e("p",null,A(L(d)),1)]),e("div",ie,[e("img",{src:le,alt:"Borrar",onClick:u}),e("p",{class:G({red:a.value,green:!a.value})},A(m.value),3)])]))}},de=b(re,[["__scopeId","data-v-5a6225b3"]]);const _e=t=>(C("data-v-14ba10a8"),t=t(),M(),t),ve={class:"movements"},me=_e(()=>e("h2",{class:"title"},"Historial",-1)),pe={class:"content"},he={__name:"MovementsScreen",props:{movements:{type:Array,default:()=>[]}},emits:["remove"],setup(t,{emit:i}){const l=t,{movements:n}=D(l),r=c=>i("remove",c);return(c,d)=>(p(),y("div",ve,[me,e("div",pe,[(p(!0),y(R,null,H(L(n),({id:_,title:m,description:a,amount:u})=>(p(),F(de,{key:_,id:_,title:m,description:a,amount:u,onRemove:r},null,8,["id","title","description","amount"]))),128))])]))}},ye=b(he,[["__scopeId","data-v-14ba10a8"]]);const fe={class:"graphic"},ge={class:"action"},$e={__name:"ResumeIndex",props:{label:{type:String,default:Date.now().toLocaleString()},dateLabel:String,totalAmount:Number,amount:{type:Number,default:null}},setup(t){const i=t,{label:l,dateLabel:n,totalAmount:r,amount:c}=D(i),d=f(()=>c.value!==null?c.value:r.value),_=f(()=>l.value!==null?l.value:n.value),m=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}),a=f(()=>m.format(d.value));return(u,s)=>(p(),y("main",null,[e("p",null,A(_.value),1),e("h1",null,A(a.value),1),e("div",fe,[S(u.$slots,"graphic",{},void 0,!0)]),e("div",ge,[S(u.$slots,"action",{},void 0,!0)])]))}},be=b($e,[["__scopeId","data-v-73b9cd41"]]),xe=""+new URL("close-icon-c67e0a46.svg",import.meta.url).href;const we=t=>(C("data-v-f432d1ad"),t=t(),M(),t),Ie={class:"modal"},Se=we(()=>e("p",null,"Nuevo movimiento",-1)),Ce={class:"body"},Me={__name:"ModelScreen",emits:["close"],setup(t,{emit:i}){const l=()=>i("close");return(n,r)=>(p(),y("div",Ie,[e("div",{class:"head"},[Se,e("img",{onClick:l,src:xe,alt:"Cerrar"})]),e("div",Ce,[S(n.$slots,"default",{},void 0,!0)])]))}},ke=b(Me,[["__scopeId","data-v-f432d1ad"]]);const k=t=>(C("data-v-97004ab6"),t=t(),M(),t),Ae=["onSubmit"],De={class:"field"},Be=k(()=>e("label",{for:"title"},"Título",-1)),Ne={class:"field"},Le=k(()=>e("label",{for:"amount"},"Monto",-1)),Te={class:"field"},Re=k(()=>e("label",{for:"description"},"Descripción",-1)),Fe={class:"field"},Ve={for:"movement-type",class:"radio-label"},Oe=k(()=>e("span",null,"Ingreso",-1)),Pe={for:"movement-type",class:"radio-label"},Ue=k(()=>e("span",null,"Gasto",-1)),Ge=k(()=>e("div",{class:"action"},[e("button",null,"Agregar movimiento")],-1)),He={__name:"ActionButton",emits:["create"],setup(t,{emit:i}){const l=h(!1),n=h(""),r=h(0),c=h(""),d=h("Ingreso"),_=()=>{l.value=!l.value,i("create",{id:Date.now(),title:n.value,description:c.value,amount:d.value==="Ingreso"?r.value:-r.value,time:new Date}),n.value="",c.value="",r.value=0,d.value="Ingreso"};return(m,a)=>(p(),y(R,null,[e("button",{onClick:a[0]||(a[0]=u=>l.value=!0)},"Agregar movimiento"),(p(),F(z,{to:"#app"},[$(w(ke,{onClose:a[6]||(a[6]=u=>l.value=!1)},{default:I(()=>[e("form",{onSubmit:X(_,["prevent"])},[e("div",De,[Be,$(e("input",{type:"text",name:"title",id:"title","onUpdate:modelValue":a[1]||(a[1]=u=>n.value=u)},null,512),[[N,n.value]])]),e("div",Ne,[Le,$(e("input",{type:"number",name:"amount",id:"amount","onUpdate:modelValue":a[2]||(a[2]=u=>r.value=u)},null,512),[[N,r.value]])]),e("div",Te,[Re,$(e("textarea",{name:"description",id:"description",cols:"30",rows:"4","onUpdate:modelValue":a[3]||(a[3]=u=>c.value=u)},null,512),[[N,c.value]])]),e("div",Fe,[O(" Tipo de movimiento "),e("label",Ve,[$(e("input",{type:"radio",name:"movement-type",id:"movement-type",value:"Ingreso","onUpdate:modelValue":a[4]||(a[4]=u=>d.value=u)},null,512),[[V,d.value]]),Oe]),e("label",Pe,[$(e("input",{type:"radio",name:"movement-type",id:"movement-type",value:"Gasto","onUpdate:modelValue":a[5]||(a[5]=u=>d.value=u)},null,512),[[V,d.value]]),Ue])]),Ge],40,Ae)]),_:1},512),[[T,l.value]])]))],64))}},Xe=b(He,[["__scopeId","data-v-97004ab6"]]);const ze=t=>(C("data-v-66f1aafc"),t=t(),M(),t),Je=["y1","y2"],je=["points"],qe=["x1","x2"],Ee=ze(()=>e("p",null,"Últimos 30 días",-1)),We={__name:"GraphicComponent",props:{amounts:{type:Array,default:()=>[]}},emits:["select"],setup(t,{emit:i}){const l=t,{amounts:n}=D(l),r=s=>{const o=Math.min(...n.value),v=Math.max(...n.value),g=s+Math.abs(o),x=Math.abs(v)+Math.abs(o);return(200-g*100/x*2).toFixed(0)},c=f(()=>r(0)),d=f(()=>{const s=n.value.length;return n.value.reduce((o,v,g)=>{const x=(300/s*(g+1)).toFixed(0),B=r(v);return`${o} ${x},${B}`},`0,${r(n.value.length?n.value[0]:0)}`)}),_=h(!1),m=h(0);J(m,s=>{const o=Math.ceil(s/(300/n.value.length));o<0||o>n.value.length||i("select",n.value[o-1])});const a=({target:s,touches:o})=>{_.value=!0;const v=s.getBoundingClientRect().width,g=s.getBoundingClientRect().x,x=o[0].clientX;m.value=(x-g)*300/v},u=()=>_.value=!1;return(s,o)=>(p(),y("div",null,[(p(),y("svg",{onTouchstartPassive:a,onTouchmovePassive:a,onTouchendPassive:u,viewBox:"0 0 300 200"},[e("line",{stroke:"#c4c4c4","stroke-width":"2",x1:"0",y1:c.value,x2:"300",y2:c.value},null,8,Je),e("polyline",{fill:"none",stroke:"#0689B0","stroke-width":"2",points:d.value},null,8,je),$(e("line",{stroke:"#04B500","stroke-width":"2",x1:m.value,y1:"0",x2:m.value,y2:"200"},null,8,qe),[[T,_.value]])],32)),Ee]))}},Ke=b(We,[["__scopeId","data-v-66f1aafc"]]),Ye={__name:"HomeScreen",setup(t){const i=h(null),l=h(null),n={weekday:"long",year:"numeric",month:"long",day:"numeric"},r=f(()=>{const s=c.value.filter(o=>{const v=new Date,g=v.setDate(v.getDate()-30);return(o==null?void 0:o.time)>g}).map(o=>o==null?void 0:o.amount);return s.map((o,v)=>s.slice(0,v+1).reduce((x,B)=>x+B,0))}),c=h([]),d=f(()=>c.value.reduce((s,o)=>s+(o==null?void 0:o.amount),0));j(()=>{const s=JSON.parse(localStorage.getItem("movements"));Array.isArray(s)&&(c.value=s==null?void 0:s.map(o=>({...o,time:new Date(o==null?void 0:o.time)})))});const _=s=>{c.value.push(s),a()},m=s=>{const o=c.value.findIndex(v=>(v==null?void 0:v.id)===s);c.value.splice(o,1),a()},a=()=>localStorage.setItem("movements",JSON.stringify(c.value)),u=s=>l.value=s;return(s,o)=>(p(),F(te,null,{header:I(()=>[w(ae)]),resume:I(()=>[w(be,{amount:l.value,"date-label":new Date(Date.now()).toLocaleDateString("es-CO",n),label:i.value,"total-amount":d.value},{graphic:I(()=>[w(Ke,{amounts:r.value,onSelect:u},null,8,["amounts"])]),action:I(()=>[w(Xe,{onCreate:_})]),_:1},8,["amount","date-label","label","total-amount"])]),movements:I(()=>[w(ye,{movements:c.value,onRemove:m},null,8,["movements"])]),_:1}))}};export{Ye as default};
